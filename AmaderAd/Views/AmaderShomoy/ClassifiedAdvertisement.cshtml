@model AmaderAd.Models.Newspaper

@{
    ViewBag.Title = "ClassifiedAdvertisement";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>আমাদের সময়তে শ্রেণিভুক্ত বিজ্ঞাপন দিন    (Publish classified advertisement in Amader Shomoy)</h2>
<p>অনুগ্রহ পূর্বক নিচের তথ্যগুলো দিন (Please Provide the Information below) </p>

@using (Html.BeginForm("Create", "Newspapers"))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.Partial("_NewspaperHeader", Model)

        <div class="form-group">
            @Html.LabelFor(m => m.AllAdCategoryId, new { @class = "col-md-2 control-label" })
            <div class="col-md-10">
                @Html.DropDownListFor(m => Model.AllAdCategoryId, Model.AllAdCategory, "বিজ্ঞাপনের শিরোনামটি বাছাই করুন  (Choose AD Category)", new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.AllAdCategoryId, "", new { @class = "text-danger" })
            </div>
        </div>


        <h2>শ্রেণিভুক্ত বিজ্ঞাপন </h2>
        <h2>Classified Advertisement</h2>

        <p>শ্রেণিভুক্ত বিজ্ঞাপনে কোনো দর্শনীও শিরোনাম দেওয়া হয় না । এ জাতীয় বিজ্ঞাপনের মূল্য প্রথম ২০ শব্দের জন্য মোট ৩০০ টাকা এবং পরবর্তী প্রতি শব্দের জন্য ১৫ টাকা । শ্রেণিভুক্ত বিজ্ঞাপন সর্বোচ্চ ৬০ শব্দের মধ্যে হতে হবে ।</p>
        <p>No noticable headline will be given on classified advertisement. For This type of advertisement first 20 words will be charged 300tk and after each word, 15 tk will be added with per word. The maximum word limit for classified ad is 60 words.</p>

        <div class="form-group">
            @Html.LabelFor(model => model.Description, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Description, new { htmlAttributes = new { style = "height:80px;", @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Description, "", new { @class = "text-danger" })
                <div class="">
                    <p id="maxwords" style="color: red;"> <b> </b> </p>
                    <p>Total Words: <b><span id="wordLimiter">0</span>/50</b></p>
                </div>

            </div>
        </div>

        <div class="form-group">
            @Html.Label("Total Cost with 15% VAT", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.TotalPrice, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                @Html.ValidationMessageFor(model => model.TotalPrice, "", new { @class = "text-danger" })
            </div>
        </div>

        @Html.Partial("_NewspaperNotice")

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" id="submit-btn" value="Submit" class="btn blue " />
            </div>
        </div>
    </div>
}

@Html.Partial("_NewspaperSampleAd")


<script>
    var amount;
    $("#Description").bind('keyup keydown paste cut', function(e)
    {
        setTimeout(function () {

            var value = $('#Description').val();
            if (value.length == 0) {
                $('#TotalPrice').val(0);
                $('#wordLimiter').html(0);
                return;
            }
            var regex = /\s+/gi;
            var wordcount = value.trim().replace(regex, ' ').split(' ').length;

            var x = 300 * .15;

            if (wordcount>=60) {
                document.getElementById("maxwords").innerHTML = "আপনি সর্বোচ্চ ৬০ শব্দের বিজ্ঞাপন দিতে পারবেন। <br>you can submit maximum 60 words advertisement";
            }
            if (wordcount <60) {
                $('#maxwords').empty();
            }

            if ( wordcount > 60 ){
                $("#submit-btn").attr("disabled", "disabled");

            } else {
                $("#submit-btn").removeAttr("disabled");
            }

            if (wordcount <= 20) {
                amount = 300 + x;
            }
            else if (wordcount > 20) {
                var extraWord = wordcount - 20;
                var y = (extraWord *15) * 0.15;
                var extraAmount = extraWord * 15 + y;
                amount = 345 + extraAmount;
            }

            $('#TotalPrice').val(amount);

            $('#wordLimiter').html(wordcount);
        },100);
    });

</script>


<script>
    var hour = new Date().getUTCHours()+6;
    $(".datetime").datepicker({
        startDate: hour >= 18 ? '+2d' : '+1d',
        autoclose:true
     });

</script>